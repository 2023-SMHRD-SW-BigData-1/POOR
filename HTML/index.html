<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <table border="1">
        <tr>
            <th>아이디</th>
            <th>비밀번호</th>
            <th>닉네임</th>
        </tr>
        <!-- member 테이블에 있는 회원의 수 만큼 출력 -->
        {%for item in list%}
        <!-- <tr>
            <td>{{item.id}}</td>
            <td>{{item.pw}}</td>
            <td>{{item.nick}}</td>
            <td><button onclick="selectOne('{{item.id}}')">이 회원 정보만 조회</button></td> -->
            <!-- localhost:8090/delete/삭제할 회원의 아이디 -->
            <!-- <td><button onclick="location.href='/delete/{{item.id}}'">삭제</button></td>
            <td><button onclick="update('{{item.id}}','{{item.pw}}','{{item.nick}}')">수정</button></td>
        </tr>
        {%endfor%} -->
        <!--  -->
    </table>

    <h3>특정 회원 정보 조회</h3>
    <table border="1">
        <tr>
            <th>아이디</th>
            <th>비밀번호</th>
            <th>닉네임</th>
        </tr>
        <!-- member 테이블에 있는 회원의 수 만큼 출력 -->
        <tr>
            <td id="searchId"></td>
            <td id="searchPw"></td>
            <td id="searchNick"></td>
        </tr>
        <!--  -->
    </table>
    <script>
        // localhost:8090/select
        async function selectOne(id){
            // querystring
            // localhost:8090/select?id=test1
            // path variable : 
            // localhost:8090/select/선택한 아이디
            const reqURL = 'select/'+id

            // res -> promises (비동기통신)(res) -> jsons(res2)
            await fetch(reqURL).then((res)=>res.json()).then((res2)=>{
                // res2 -> {member : rows(array)}
                // res2.member[0] -> {id, pw, nick}
                document.getElementById('searchId').innerText = res2.member[0].id
                document.getElementById('searchPw').innerText = res2.member[0].pw
            })
        }

        function update(id, pw){
            document.getElementById('updateId').value = id 
            document.getElementById('updatePw').value = pw
        }
    </script>
</body>
</html>